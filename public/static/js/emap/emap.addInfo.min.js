window.emap=window.emap||{};emap.addInfo=emap.addInfo||{};emap.addInfo={_districtCN:new ext.utility.hashTable(),createPortTree:function(){var a=this;$.ajax({url:"./tree.json",type:"GET",dataType:"json",success:function(c){var d=c.tree;var b=a.treeIteration(d);a.showTreeView(b)}})},treeIteration:function(d){var a=this;var c="[";for(var b=0;b<d.length;b++){c+='{"text":"'+d[b].text+'","href":"'+d[b].href+'"';if(d[b].nodes){c+=',"tags":["'+d[b].nodes.length+'"]';c+=',"nodes":'+a.treeIteration(d[b].nodes)}else{c+=',"tags":["0"]'}if(b==d.length-1){c+="}]"}else{c+="},"}}return c},showTreeView:function(a){$("#treeview").treeview({data:a,showTags:true}).on("nodeSelected",function(d,c){console.log("树被选择："+c.text);var b=$("#treeview").treeview("getParent",c);emap.drawEvent.drawPortBlock(c.text,c.href);emap.drawEvent.drawNextLevelBlock(c.href,b.href);emap.drawEvent.showSingleMarker(c.href)})},addInfoByTool:function(a){var c=null;if(a){c=this._districtCN.getValue(a)}if(c){$("div.map div#details h4.modal-title").html("录入"+c+"堆场信息")}else{$("div.map div#details h4.modal-title").html("录入堆场信息")}var b='<form class="form-horizontal"><div class="form-group"><label class="col-sm-3 control-label">港口经营人</label><div class="col-sm-9"><input type="text" name="company" class="form-control" placeholder="港口经营人"></div></div><div class="form-group"><label class="col-sm-3 control-label">堆场名称</label><div class="col-sm-9"><input type="text" name="yardName" class="form-control" placeholder="堆场名称"></div></div><div class="form-group"><label class="col-sm-3 control-label">港区名称</label><div class="col-sm-9"><input type="text" name="block" class="form-control" placeholder="港区名称"></div></div><div class="form-group"><label class="col-sm-3 control-label">总面积（平方米）</label><div class="col-sm-9"><input type="text" name="area" class="form-control" placeholder="总面积（平方米）"></div></div><div class="form-group"><label class="col-sm-3 control-label">放置货物类别</label><div class="col-sm-9"><input type="text" name="goodsType" class="form-control" placeholder="类别"></div></div></form>';$("div.map div#details div.modal-body").html(b);$("div.map div#details").modal("show")},initHashTables:function(){this._districtCN.add("YTG","烟台港");this._districtCN.add("ZFW","芝罘湾港区");this._districtCN.add("XGQ","烟台西港区");this._districtCN.add("LZG","莱州港区");this._districtCN.add("LKG","龙口港区");this._districtCN.add("LJK","栾家口港区");this._districtCN.add("PLX","蓬莱西港区");this._districtCN.add("CDG","长岛港区");this._districtCN.add("PLD","蓬莱东港区");this._districtCN.add("MPG","牟平港区");this._districtCN.add("HYG","海洋港区")}};emap.addInfo.initHashTables();